_HiStOrY_V2_
--\040List\040all\040databases\040to\040find\040yours
SHOW\040DATABASES;
--\040Once\040you\040know\040your\040database\040name,\040select\040it
USE\040your_database_name;
--\040See\040all\040tables\040in\040the\040database
SHOW\040TABLES;
--\040Display\040all\040users\040(replace\040'users'\040with\040your\040actual\040table\040name\040if\040different)
SELECT\040*\040FROM\040users;
CREATE\040DATABASE\040creator_os;
USE\040creator_os;
CREATE\040TABLE\040users\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040username\040VARCHAR(50)\040NOT\040NULL\040UNIQUE,
\040\040\040\040password_hash\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040email\040VARCHAR(100)\040DEFAULT\040NULL,
\040\040\040\040role\040VARCHAR(50)\040DEFAULT\040'user',
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP
);
CREATE\040TABLE\040users\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040username\040VARCHAR(50)\040NOT\040NULL\040UNIQUE,\040\040\040\040\040password_hash\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040email\040VARCHAR(100)\040DEFAULT\040NULL,\040\040\040\040\040role\040VARCHAR(50)\040DEFAULT\040'user',\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP\040);
CREATE\040TABLE\040sessions\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040user_id\040INT\040NOT\040NULL,
\040\040\040\040token\040VARCHAR(500)\040NOT\040NULL,
\040\040\040\040expires_at\040DATETIME\040NOT\040NULL,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE
);
CREATE\040TABLE\040sessions\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040user_id\040INT\040NOT\040NULL,\040\040\040\040\040token\040VARCHAR(500)\040NOT\040NULL,\040\040\040\040\040expires_at\040DATETIME\040NOT\040NULL,\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040CASCADE\040);
CREATE\040TABLE\040logs\040(
\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,
\040\040\040\040user_id\040INT\040DEFAULT\040NULL,
\040\040\040\040action\040VARCHAR(255)\040NOT\040NULL,
\040\040\040\040ip_address\040VARCHAR(50)\040DEFAULT\040NULL,
\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,
\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040SET\040NULL
);
CREATE\040TABLE\040logs\040(\040\040\040\040\040id\040INT\040AUTO_INCREMENT\040PRIMARY\040KEY,\040\040\040\040\040user_id\040INT\040DEFAULT\040NULL,\040\040\040\040\040action\040VARCHAR(255)\040NOT\040NULL,\040\040\040\040\040ip_address\040VARCHAR(50)\040DEFAULT\040NULL,\040\040\040\040\040created_at\040TIMESTAMP\040DEFAULT\040CURRENT_TIMESTAMP,\040\040\040\040\040FOREIGN\040KEY\040(user_id)\040REFERENCES\040users(id)\040ON\040DELETE\040SET\040NULL\040);
cd\040/var/www/vhosts/puaboverse.online/backend
npm\040install\040mysql2
//\040db.js
const\040mysql\040=\040require('mysql2/promise');
cd\040/var/www/vhosts/puaboverse.online/backend\040npm\040install\040mysql2\040//\040db.js\040const\040mysql\040=\040require('mysql2/promise');
//\040Update\040these\040credentials\040as\040per\040your\040MariaDB\040setup
const\040pool\040=\040mysql.createPool({
\040\040\040\040host:\040'localhost',
\040\040\040\040user:\040'root',
\040\040\040\040password:\040'YOUR_ROOT_PASSWORD',\040\040//\040replace\040with\040your\040MariaDB\040root\040password
\040\040\040\040database:\040'creator_os',
\040\040\040\040waitForConnections:\040true,
\040\040\040\040connectionLimit:\04010,
\040\040\040\040queueLimit:\0400
});
//\040Update\040these\040credentials\040as\040per\040your\040MariaDB\040setup\040const\040pool\040=\040mysql.createPool({\040\040\040\040\040host:\040'localhost',\040\040\040\040\040user:\040'root',\040\040\040\040\040password:\040'YOUR_ROOT_PASSWORD',\040\040//\040replace\040with\040your\040MariaDB\040root\040password\040\040\040\040\040database:\040'creator_os',\040\040\040\040\040waitForConnections:\040true,\040\040\040\040\040connectionLimit:\04010,\040\040\040\040\040queueLimit:\0400\040});
module.exports\040=\040pool;
const\040express\040=\040require('express');
const\040pool\040=\040require('./db');\040\040//\040the\040db.js\040file\040you\040just\040created
const\040app\040=\040express();
//\040the\040db.js\040file\040you\040just\040created\040\040const\040app\040=\040express();
app.use(express.json());
app.get('/api/test-db',\040async\040(req,\040res)\040=>\040{
\040\040\040\040try\040{
\040\040\040\040\040\040\040\040const\040[rows]\040=\040await\040pool.query('SELECT\040NOW()\040AS\040now');
app.get('/api/test-db',\040async\040(req,\040res)\040=>\040{\040\040\040\040\040try\040{\040\040\040\040\040\040\040\040\040const\040[rows]\040=\040await\040pool.query('SELECT\040NOW()\040AS\040now');
\040\040\040\040\040\040\040\040res.json({\040success:\040true,\040serverTime:\040rows[0].now\040});
\040\040\040\040}\040catch\040(err)\040{
\040\040\040\040\040\040\040\040console.error(err);
}\040catch\040(err)\040{\040\040\040\040\040\040\040\040\040console.error(err);
\040\040\040\040\040\040\040\040res.status(500).json({\040success:\040false,\040error:\040'Database\040connection\040failed'\040});
\040\040\040\040}
});
}\040});
app.listen(3000,\040()\040=>\040console.log('Backend\040running\040on\040port\0403000'));
EXIT;
--\040Switch\040to\040the\040MariaDB\040system\040database
USE\040mysql;
--\040Create\040the\040database\040if\040it\040doesn't\040exist
CREATE\040DATABASE\040IF\040NOT\040EXISTS\040creator_os;
--\040Grant\040full\040privileges\040to\040root@localhost\040with\040your\040password
GRANT\040ALL\040PRIVILEGES\040ON\040creator_os.*\040TO\040'root'@'localhost'\040IDENTIFIED\040BY\040'LnuWQ96Y';
--\040Reload\040privileges\040to\040apply\040changes
FLUSH\040PRIVILEGES;
--\040Exit\040MariaDB
EXIT;
FLUSH\040PRIVILEGES;
ALTER\040USER\040'root'@'localhost'\040IDENTIFIED\040BY\040'LnuWQ96Y';
EXIT;
DESCRIBE\040users;
USE\040creator_os;
DESCRIBE\040users;
ALTER\040TABLE\040users\040CHANGE\040password_hash\040password\040VARCHAR(255)\040NOT\040NULL;
pm2\040restart\040creator-os-backend
curl\040http://127.0.0.1:3000/api/test-db
curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'
curl\040-X\040POST\040http://127.0.0.1:3000/api/login\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'
EXIT;
pm2\040restart\040creator-os-backend\040curl\040http://127.0.0.1:3000/api/test-db\040curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'\040curl\040-X\040POST\040http://127.0.0.1:3000/api/login\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'\040\040EXIT;
pm2\040restart\040creator-os-backend
curl\040http://127.0.0.1:3000/api/test-db
curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'
curl\040-X\040POST\040http://127.0.0.1:3000/api/login\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'
EXIT;
pm2\040restart\040creator-os-backend\040curl\040http://127.0.0.1:3000/api/test-db\040curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'\040curl\040-X\040POST\040http://127.0.0.1:3000/api/login\040-H\040"Content-Type:\040application/json"\040-d\040'{"username":"testuser","password":"123456"}'\040EXIT;
QUIT;
USE\040creator_os;
DESCRIBE\040users;
ALTER\040TABLE\040users\040CHANGE\040password_hash\040password\040VARCHAR(255)\040NOT\040NULL;
EXIT;
TRUNCATE\040TABLE\040users;
DESCRIBE\040users;
USE\040creator_os;
DESCRIBE\040users;
TRUNCATE\040TABLE\040users;
DELETE\040FROM\040users;
ALTER\040TABLE\040users\040AUTO_INCREMENT\040=\0401;
curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040\134
\040\040-H\040"Content-Type:\040application/json"\040\134
\040\040-d\040'{"username":"testuser","password":"123456"}'
EXIT;
curl\040-X\040POST\040http://127.0.0.1:3000/api/register\040\040\040\040-H\040"Content-Type:\040application/json"\040\040\040\040-d\040'{"username":"testuser","password":"123456"}'\040EXIT;
EXIT;
